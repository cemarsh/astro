---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Blog | Astro Exploration">
	<h1 class="mb-2 text-3xl font-bold text-white">Blog</h1>
	<p class="mb-8 text-slate-400">Articles about Astro, web development, and modern frameworks.</p>

	<div class="grid gap-6">
		{sortedPosts.map((post) => (
			<article class="rounded-lg border border-slate-700 bg-slate-800 p-6 hover:border-purple-500">
				<a href={`/blog/${post.id}`}>
					<div class="mb-2 flex items-center gap-4 text-sm text-slate-400">
						<time datetime={post.data.pubDate.toISOString()}>
							{post.data.pubDate.toLocaleDateString('en-US', {
								year: 'numeric',
								month: 'long',
								day: 'numeric',
							})}
						</time>
						<span>â€¢</span>
						<span>{post.data.author}</span>
					</div>
					<h2 class="mb-2 text-xl font-bold text-white hover:text-purple-400">
						{post.data.title}
					</h2>
					<p class="mb-4 text-slate-300">{post.data.description}</p>
					<div class="flex flex-wrap gap-2">
						{post.data.tags.map((tag) => (
							<span class="rounded bg-slate-700 px-2 py-1 text-xs text-slate-300">{tag}</span>
						))}
					</div>
				</a>
			</article>
		))}
	</div>
</Layout>
